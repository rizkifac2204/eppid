(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7404],{14837:function(e,a,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/dip/[id]/edit",function(){return n(76869)}])},76869:function(e,a,n){"use strict";n.r(a);var i=n(85893),r=n(6154),l=n(55678),s=n(82175),t=n(74231),u=n(11163),d=n(67294),o=n(87357),h=n(66242),m=n(44267),f=n(15861),c=n(50135),g=n(86886),p=n(83321),_=n(94054),b=n(56815),j=n(31085),x=n(18972),Z=n(47312),k=n(53457),v=n(50480),B=n(69368),S=n(77957);let w=(e,a,n,i)=>{let s=new FormData;for(var t in e)s.append(t,e[t]);let u=l.Am.loading("Tunggu Sebentar...",{autoClose:!1});r.Z.put("/api/dip/add",s,{headers:{"content-type":"multipart/form-data",destinationfile:n}}).then(a=>{l.Am.update(u,{render:a.data.message,type:"success",isLoading:!1,autoClose:2e3}),setTimeout(()=>{i.push("/admin/dip/".concat(e.id))},2e3)}).catch(e=>{l.Am.update(u,{render:e.response.data.message,type:"error",isLoading:!1,autoClose:2e3})}).then(()=>{a(!1)})},C=t.Ry({ganti_file:t.O7("").required("Harus Dipilih"),nama_file:t.Z_("").nullable(),id:t.Rx().required("Harus Diisi"),sifat:t.Z_().required("Harus Diisi"),jenis_informasi:t.Z_().required("Harus Diisi"),ringkasan:t.Z_().required("Harus Diisi"),tahun_pembuatan:t.Rx().required("Harus Diisi"),penanggung_jawab:t.Z_().required("Harus Diisi"),bentuk_informasi:t.Z_().required("Harus Diisi"),file:t.nK().test("FILE_SIZE","Ukuran File Tidak Boleh Melebihi 10mb.",e=>!e||e&&e.size<=10485760).when(["nama_file","ganti_file"],{is:(e,a)=>!e||a,then:t.nK().required("Harus Upload Ulang")})});function I(){let e=(0,u.useRouter)(),{id:a}=e.query,[n,t]=(0,d.useState)(0),[I,P]=(0,d.useState)({ganti_file:!1,id:"",sifat:"",jenis_informasi:"",ringkasan:"",tahun_pembuatan:"",penanggung_jawab:"",bentuk_informasi:"",nama_file:""});(0,d.useEffect)(()=>{a&&r.Z.get("/api/dip/"+a).then(e=>{let a=e.data;Object.assign(a,{nama_file:a.file}).file,delete a.file,P(e=>a),t(e.data.bawaslu_id)}).catch(a=>{l.Am.error(a.response.data.message),setTimeout(()=>e.push("/admin/dip"),2e3)})},[a,e]);let q=(0,s.TA)({initialValues:{...I,ganti_file:!1},validationSchema:C,enableReinitialize:!0,onSubmit:(a,i)=>{let{setSubmitting:r}=i;return w(a,r,"dip/".concat(n),e)}});return(0,i.jsx)(h.Z,{children:(0,i.jsxs)(m.Z,{children:[(0,i.jsx)(f.Z,{sx:{fontSize:14},gutterBottom:!0,children:"Edit Daftar Informasi Publik"}),(0,i.jsx)(o.Z,{children:(0,i.jsx)("form",{onSubmit:q.handleSubmit,children:(0,i.jsxs)(g.ZP,{container:!0,spacing:2,children:[(0,i.jsxs)(g.ZP,{item:!0,xs:12,md:6,children:[(0,i.jsxs)(_.Z,{fullWidth:!0,sx:{mt:2.6},error:q.touched.sifat&&Boolean(q.errors.sifat),children:[(0,i.jsx)(Z.Z,{children:"Sifat *"}),(0,i.jsxs)(j.Z,{name:"sifat",label:"Sifat *",value:q.values.sifat,onChange:q.handleChange,onBlur:q.handleBlur,children:[(0,i.jsx)(x.Z,{value:"",children:"Pilih"}),(0,i.jsx)(x.Z,{value:"Berkala",children:"Berkala"}),(0,i.jsx)(x.Z,{value:"Serta Merta",children:"Serta Merta"}),(0,i.jsx)(x.Z,{value:"Setiap Saat",children:"Setiap Saat"})]}),(0,i.jsx)(b.Z,{children:q.touched.sifat&&q.errors.sifat})]}),(0,i.jsxs)(_.Z,{fullWidth:!0,sx:{mt:2.6,mb:.8},error:q.touched.jenis_informasi&&Boolean(q.errors.jenis_informasi),children:[(0,i.jsx)(Z.Z,{children:"Jenis Informasi *"}),(0,i.jsxs)(j.Z,{name:"jenis_informasi",label:"Jenis Informasi *",value:q.values.jenis_informasi,onChange:q.handleChange,onBlur:q.handleBlur,children:[(0,i.jsx)(x.Z,{value:"",children:"Pilih"}),(0,i.jsx)(x.Z,{value:"Kelembagaan",children:"Kelembagaan"}),(0,i.jsx)(x.Z,{value:"Informasi Pemilu",children:"Informasi Pemilu"})]}),(0,i.jsx)(b.Z,{children:q.touched.jenis_informasi&&q.errors.jenis_informasi})]}),(0,i.jsx)(c.Z,{fullWidth:!0,required:!0,margin:"normal",label:"Ringkasan Isi Materi",name:"ringkasan",value:q.values.ringkasan,onChange:q.handleChange,onBlur:q.handleBlur,error:q.touched.ringkasan&&Boolean(q.errors.ringkasan),helperText:q.touched.ringkasan&&q.errors.ringkasan}),(0,i.jsx)(c.Z,{fullWidth:!0,required:!0,type:"number",margin:"normal",label:"Tahun Pembuatan",name:"tahun_pembuatan",value:q.values.tahun_pembuatan,onChange:q.handleChange,onBlur:q.handleBlur,error:q.touched.tahun_pembuatan&&Boolean(q.errors.tahun_pembuatan),helperText:q.touched.tahun_pembuatan&&q.errors.tahun_pembuatan})]}),(0,i.jsxs)(g.ZP,{item:!0,xs:12,md:6,children:[(0,i.jsxs)(_.Z,{fullWidth:!0,sx:{mt:2},error:q.touched.bentuk_informasi&&Boolean(q.errors.bentuk_informasi),children:[(0,i.jsx)(Z.Z,{children:"Bentuk Informasi *"}),(0,i.jsxs)(j.Z,{name:"bentuk_informasi",label:"Bentuk Informasi *",value:q.values.bentuk_informasi,onChange:q.handleChange,onBlur:q.handleBlur,children:[(0,i.jsx)(x.Z,{value:"",children:"Pilih"}),(0,i.jsx)(x.Z,{value:"Soft copy",children:"Soft copy"}),(0,i.jsx)(x.Z,{value:"Hard copy",children:"Hard copy"})]}),(0,i.jsx)(b.Z,{children:q.touched.bentuk_informasi&&q.errors.bentuk_informasi})]}),(0,i.jsx)(c.Z,{fullWidth:!0,required:!0,margin:"normal",label:"Unit Yang Bertanggung Jawab Atas Informasi",name:"penanggung_jawab",value:q.values.penanggung_jawab,onChange:q.handleChange,onBlur:q.handleBlur,error:q.touched.penanggung_jawab&&Boolean(q.errors.penanggung_jawab),helperText:q.touched.penanggung_jawab&&q.errors.penanggung_jawab}),(0,i.jsx)(k.Z,{children:(0,i.jsx)(v.Z,{control:(0,i.jsx)(B.Z,{name:"ganti_file",checked:q.values.ganti_file,onChange:e=>{q.setFieldValue("ganti_file",e.target.checked)}}),label:" Upload Ulang"})}),(0,i.jsx)(b.Z,{children:q.errors.file}),q.values.ganti_file?(0,i.jsx)(c.Z,{required:q.values.ganti_file,fullWidth:!0,type:"file",id:"file",margin:"normal",label:"Upload File",name:"file",InputLabelProps:{shrink:!0},onBlur:q.handleBlur,onChange:e=>{q.setFieldValue("file",e.currentTarget.files[0])},error:Boolean(q.errors.file),helperText:q.errors.file}):(0,i.jsxs)(i.Fragment,{children:["file :",q.values.nama_file?(0,i.jsx)("a",{target:"_blank",rel:"noreferrer",href:"".concat("https://ppidapp.bawaslu.go.id/api/services/file/public/dip/","/").concat(n,"/").concat(q.values.nama_file),children:q.values.nama_file}):"Tidak ada file"]})]}),(0,i.jsx)(g.ZP,{item:!0,children:(0,i.jsx)(p.Z,{disabled:q.isSubmitting,type:"submit",variant:"contained",endIcon:(0,i.jsx)(S.Z,{}),children:"Update"})})]})})})]})})}I.auth=!0,I.breadcrumb=[{path:"/admin",title:"Home"},{path:"/admin/dip",title:"Daftar Informasi Publik"},{path:"/admin/dip/getID",title:"Detail"},{path:"/admin/dip",title:"Edit DIP"}],a.default=I}},function(e){e.O(0,[9004,6886,8271,9100,9774,2888,179],function(){return e(e.s=14837)}),_N_E=e.O()}]);