(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3087],{66242:function(e,t,r){"use strict";r.d(t,{Z:function(){return g}});var i=r(87462),a=r(63366),n=r(67294),s=r(86010),o=r(94780),l=r(90948),u=r(71657),d=r(90629),c=r(1588),m=r(34867);function p(e){return(0,m.Z)("MuiCard",e)}(0,c.Z)("MuiCard",["root"]);var h=r(85893);let b=["className","raised"],Z=e=>{let{classes:t}=e;return(0,o.Z)({root:["root"]},p,t)},x=(0,l.ZP)(d.Z,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({overflow:"hidden"})),f=n.forwardRef(function(e,t){let r=(0,u.Z)({props:e,name:"MuiCard"}),{className:n,raised:o=!1}=r,l=(0,a.Z)(r,b),d=(0,i.Z)({},r,{raised:o}),c=Z(d);return(0,h.jsx)(x,(0,i.Z)({className:(0,s.Z)(c.root,n),elevation:o?8:void 0,ref:t,ownerState:d},l))});var g=f},31425:function(e,t,r){"use strict";r.d(t,{Z:function(){return f}});var i=r(63366),a=r(87462),n=r(67294),s=r(86010),o=r(94780),l=r(90948),u=r(71657),d=r(1588),c=r(34867);function m(e){return(0,c.Z)("MuiDialogActions",e)}(0,d.Z)("MuiDialogActions",["root","spacing"]);var p=r(85893);let h=["className","disableSpacing"],b=e=>{let{classes:t,disableSpacing:r}=e;return(0,o.Z)({root:["root",!r&&"spacing"]},m,t)},Z=(0,l.ZP)("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,!r.disableSpacing&&t.spacing]}})(({ownerState:e})=>(0,a.Z)({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!e.disableSpacing&&{"& > :not(:first-of-type)":{marginLeft:8}})),x=n.forwardRef(function(e,t){let r=(0,u.Z)({props:e,name:"MuiDialogActions"}),{className:n,disableSpacing:o=!1}=r,l=(0,i.Z)(r,h),d=(0,a.Z)({},r,{disableSpacing:o}),c=b(d);return(0,p.jsx)(Z,(0,a.Z)({className:(0,s.Z)(c.root,n),ownerState:d,ref:t},l))});var f=x},6514:function(e,t,r){"use strict";r.d(t,{Z:function(){return g}});var i=r(63366),a=r(87462),n=r(67294),s=r(86010),o=r(94780),l=r(90948),u=r(71657),d=r(1588),c=r(34867);function m(e){return(0,c.Z)("MuiDialogContent",e)}(0,d.Z)("MuiDialogContent",["root","dividers"]);var p=r(4472),h=r(85893);let b=["className","dividers"],Z=e=>{let{classes:t,dividers:r}=e;return(0,o.Z)({root:["root",r&&"dividers"]},m,t)},x=(0,l.ZP)("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,r.dividers&&t.dividers]}})(({theme:e,ownerState:t})=>(0,a.Z)({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},t.dividers?{padding:"16px 24px",borderTop:`1px solid ${(e.vars||e).palette.divider}`,borderBottom:`1px solid ${(e.vars||e).palette.divider}`}:{[`.${p.Z.root} + &`]:{paddingTop:0}})),f=n.forwardRef(function(e,t){let r=(0,u.Z)({props:e,name:"MuiDialogContent"}),{className:n,dividers:o=!1}=r,l=(0,i.Z)(r,b),d=(0,a.Z)({},r,{dividers:o}),c=Z(d);return(0,h.jsx)(x,(0,a.Z)({className:(0,s.Z)(c.root,n),ownerState:d,ref:t},l))});var g=f},37645:function(e,t,r){"use strict";var i=r(87462),a=r(63366),n=r(67294),s=r(86010),o=r(94780),l=r(15861),u=r(90948),d=r(71657),c=r(4472),m=r(34182),p=r(85893);let h=["className","id"],b=e=>{let{classes:t}=e;return(0,o.Z)({root:["root"]},c.a,t)},Z=(0,u.ZP)(l.Z,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),x=n.forwardRef(function(e,t){let r=(0,d.Z)({props:e,name:"MuiDialogTitle"}),{className:o,id:l}=r,u=(0,a.Z)(r,h),c=b(r),{titleId:x=l}=n.useContext(m.Z);return(0,p.jsx)(Z,(0,i.Z)({component:"h2",className:(0,s.Z)(c.root,o),ownerState:r,ref:t,variant:"h6",id:x},u))});t.Z=x},4472:function(e,t,r){"use strict";r.d(t,{a:function(){return n}});var i=r(1588),a=r(34867);function n(e){return(0,a.Z)("MuiDialogTitle",e)}let s=(0,i.Z)("MuiDialogTitle",["root"]);t.Z=s},81743:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/subscriber",function(){return r(18574)}])},18574:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return T}});var i=r(85893),a=r(67294),n=r(6154),s=r(55678),o=r(85945),l=r(67848),u=r(66242),d=r(83321),c=r(65362),m=r(78591),p=r(13173),h=r(84415),b=r(82175),Z=r(74231),x=r(50135),f=r(50657),g=r(31425),j=r(6514),v=r(37645);let S=(e,t)=>{let r=s.Am.loading("Tunggu Sebentar...",{autoClose:!1});n.Z.post("/api/subscriber",e).then(e=>{t.invalidateQueries(),setTimeout(()=>t.onClose(),1e3),s.Am.update(r,{render:e.data.message,type:e.data.type,isLoading:!1,autoClose:2e3})}).catch(e=>{console.log(e.response.data),s.Am.update(r,{render:e.response.data.message,type:"error",isLoading:!1,autoClose:2e3})})},C=Z.Ry({nama_subscriber:Z.Z_(),email_subscriber:Z.Z_("Masukan Email").email("Email Tidak Valid").required("Email Harus Diisi")});var _=function(e){let t=(0,b.TA)({initialValues:{nama_subscriber:"",email_subscriber:""},enableReinitialize:!0,validationSchema:C,onSubmit:t=>S(t,e)});return(0,a.useEffect)(()=>{e.open&&t.resetForm()},[e.open]),(0,i.jsx)(f.Z,{open:e.open,onClose:e.onClose,fullScreen:e.fullScreen,children:(0,i.jsxs)("form",{onSubmit:t.handleSubmit,children:[(0,i.jsx)(v.Z,{children:"Tambah Subscriber Baru"}),(0,i.jsxs)(j.Z,{children:[(0,i.jsx)(x.Z,{sx:{mb:3},fullWidth:!0,margin:"normal",label:"Nama",name:"nama_subscriber",value:t.values.nama_subscriber,onChange:t.handleChange,onBlur:t.handleBlur,error:t.touched.nama_subscriber&&Boolean(t.errors.nama_subscriber),helperText:t.touched.nama_subscriber&&t.errors.nama_subscriber}),(0,i.jsx)(x.Z,{fullWidth:!0,required:!0,type:"email",margin:"normal",label:"Email",name:"email_subscriber",value:t.values.email_subscriber,onChange:t.handleChange,onBlur:t.handleBlur,error:t.touched.email_subscriber&&Boolean(t.errors.email_subscriber),helperText:t.touched.email_subscriber&&t.errors.email_subscriber})]}),(0,i.jsxs)(g.Z,{children:[(0,i.jsx)(d.Z,{type:"submit",children:"Simpan dan Tutup"}),(0,i.jsx)(d.Z,{onClick:e.onClose,type:"button",children:"Tutup"})]})]})})};function w(){let e=(0,o.NL)(),[t,r]=(0,a.useState)(10),[b,Z]=(0,a.useState)([]),[x,f]=(0,a.useState)(!1),{data:g,isLoading:j}=(0,l.a)({queryKey:["subscribers"],queryFn:e=>{let{signal:t}=e;return n.Z.get("/api/subscriber",{signal:t}).then(e=>e.data).catch(e=>{throw Error(e.response.data.message)})}}),v=t=>{let r=confirm("Yakin Hapus Data?");if(r){let r=s.Am.loading("Tunggu Sebentar...",{autoClose:!1});n.Z.put("/api/subscriber",{id:t}).then(t=>{setTimeout(()=>{e.invalidateQueries(["subscribers"])}),s.Am.update(r,{render:t.data.message,type:"success",isLoading:!1,autoClose:2e3})}).catch(e=>{s.Am.update(r,{render:e.response.data.message,type:"error",isLoading:!1,autoClose:2e3})})}},S=()=>{let t=confirm("Yakin Hapus Data Terpilih?");if(t){let t=s.Am.loading("Tunggu Sebentar...",{autoClose:!1});n.Z.delete("/api/subscriber",{data:b}).then(r=>{setTimeout(()=>{e.invalidateQueries(["subscribers"])}),s.Am.update(t,{render:r.data.message,type:"success",isLoading:!1,autoClose:2e3})}).catch(e=>{s.Am.update(t,{render:e.response.data.message,type:"error",isLoading:!1,autoClose:2e3})})}};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(u.Z,{children:[(0,i.jsx)(d.Z,{variant:"outlined",sx:{mb:2},onClick:()=>f(!0),children:"Tambah Subscriber"}),(0,i.jsx)(m._,{loading:j,autoHeight:!0,rows:g||[],columns:[{field:"nama_bawaslu",headerName:"Subscriber",minWidth:200},{field:"nama_subscriber",headerName:"Nama",width:220},{field:"email_subscriber",headerName:"Email",minWidth:180,flex:1},{field:"created_at",headerName:"Terdaftar Pada",width:120,valueGetter:e=>new Date(e.row.created_at).toISOString().split("T")[0],hide:!0},{field:"actions",type:"actions",headerName:"Actions",width:200,cellClassName:"actions",getActions:e=>[(0,i.jsx)(c.u,{icon:(0,i.jsx)(p.Z,{}),label:"Delete",onClick:()=>v(e.id)},"3")]}],pageSize:t,onPageSizeChange:e=>r(e),rowsPerPageOptions:[5,10,20],checkboxSelection:!0,disableSelectionOnClick:!0,onSelectionModelChange:e=>Z(e),components:{Toolbar:h.N},componentsProps:{toolbar:{selectedItem:b,handleDeleteSelected:S}}})]}),(0,i.jsx)(_,{open:x,onClose:()=>f(!1),invalidateQueries:()=>e.invalidateQueries(["subscribers"])})]})}w.auth=!0,w.breadcrumb=[{path:"/admin",title:"Home"},{path:"/admin/subscriber",title:"Subscriber"}];var T=w},84415:function(e,t,r){"use strict";r.d(t,{D:function(){return g},N:function(){return f}});var i=r(85893),a=r(83321),n=r(86886),s=r(13173),o=r(9944),l=r(93946),u=r(34386),d=r(42176),c=r(6132),m=r(50853),p=r(54482),h=r(10930),b=r(36433);let Z=e=>{let{selectedItem:t,handleDeleteSelected:r}=e;return(0,i.jsxs)(a.Z,{variant:"text",size:"small",startIcon:(0,i.jsx)(s.Z,{}),disabled:0===t.length,onClick:r,children:["Hapus ",t.length," Data Terpilih"]})},x=()=>(0,i.jsx)(a.Z,{sx:{fontSize:12},variant:"text",size:"small",startIcon:(0,i.jsx)(o.Z,{}),onClick:()=>window.open("https://www.adinstruments.com/support/knowledge-base/how-can-comma-separated-list-be-converted-cells-column-lt","_blank"),children:"Bantuan"});function f(e){return(0,i.jsx)(d.D,{children:(0,i.jsxs)(n.ZP,{container:!0,spacing:1,justify:"space-between",children:[(0,i.jsx)(n.ZP,{item:!0,children:(0,i.jsx)(c.S,{})}),(0,i.jsx)(n.ZP,{item:!0,children:(0,i.jsx)(m.M,{})}),(0,i.jsx)(n.ZP,{item:!0,children:(0,i.jsx)(p.L,{})}),(0,i.jsx)(n.ZP,{item:!0,children:(0,i.jsx)(h.Zh,{})}),(0,i.jsx)(n.ZP,{item:!0,children:(0,i.jsx)(x,{})}),(0,i.jsx)(n.ZP,{item:!0,children:(0,i.jsx)(Z,{selectedItem:e.selectedItem,handleDeleteSelected:e.handleDeleteSelected})}),(0,i.jsxs)(n.ZP,{item:!0,xs:12,children:[(0,i.jsx)(b.T,{quickFilterParser:e=>e.split(",").map(e=>e.trim()).filter(e=>""!==e)}),e.multiSearch&&(0,i.jsx)(u.Z,{title:"Jika Lebih dari satu pencarian, gunakan tanda koma (,)",children:(0,i.jsx)(l.Z,{size:"small",children:(0,i.jsx)(o.Z,{fontSize:"inherit"})})})]})]})})}function g(e){return(0,i.jsx)(d.D,{children:(0,i.jsxs)(n.ZP,{container:!0,spacing:1,children:[(0,i.jsx)(n.ZP,{item:!0,children:(0,i.jsx)(c.S,{sx:{fontSize:12}})}),(0,i.jsx)(n.ZP,{item:!0,children:(0,i.jsx)(p.L,{sx:{fontSize:12}})}),(0,i.jsx)(n.ZP,{item:!0,children:(0,i.jsx)(h.Zh,{sx:{fontSize:12}})}),(0,i.jsx)(n.ZP,{item:!0,sx:{mr:3},children:(0,i.jsx)(x,{sx:{fontSize:12}})}),(0,i.jsxs)(n.ZP,{sx:{pt:1,ml:1},children:[(0,i.jsx)(b.T,{quickFilterParser:e=>e.split(",").map(e=>e.trim()).filter(e=>""!==e)}),(0,i.jsx)(u.Z,{title:"Jika Lebih dari satu pencarian, gunakan tanda koma (,)",children:(0,i.jsx)(l.Z,{size:"small",children:(0,i.jsx)(o.Z,{fontSize:"inherit"})})})]})]})})}}},function(e){e.O(0,[9004,6886,8271,7848,5015,5382,9774,2888,179],function(){return e(e.s=81743)}),_N_E=e.O()}]);