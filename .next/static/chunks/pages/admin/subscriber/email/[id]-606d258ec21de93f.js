(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3684],{84480:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/subscriber/email/[id]",function(){return n(62570)}])},62570:function(e,t,n){"use strict";n.r(t);var i=n(85893),r=n(11163),a=n(67294),s=n(6154),l=n(25675),c=n.n(l),u=n(55678),o=n(29238),d=n.n(o),h=n(85945),x=n(67848),m=n(86886),j=n(66242),Z=n(44267),f=n(69661),g=n(67358),p=n(38895),b=n(22797),A=n(15861),S=n(7906),w=n(295),D=n(53252),_=n(72882),k=n(68509),P=n(90629),v=n(34386),y=n(87357),C=n(16323),E=n(15497),F=n(88075),I=n(22961),T=n(23508),H=n(13173),N=n(53724),L=n(43514);function Q(){let e=(0,h.NL)(),t=(0,r.useRouter)(),{id:n}=t.query,[l,o]=(0,a.useState)(""),{data:Q,isLoading:B,isError:O,error:M}=(0,x.a)({enabled:!!n,queryKey:["email",n],queryFn:e=>{let{signal:t}=e;return s.Z.get("/api/subscriber/email/".concat(n),{signal:t}).then(e=>e.data).catch(e=>{throw Error(e.response.data.message)})}});(0,a.useEffect)(()=>{if(!(null==Q?void 0:Q.listPenerima))return;let e=Q.listPenerima.map(e=>e.email_subscriber),t=e.join(", ");o(t)},[Q]);let U=()=>{let i=confirm("Yakin Hapus Data?");if(i){let i=u.Am.loading("Tunggu Sebentar...",{autoClose:!1});s.Z.delete("/api/subscriber/email/".concat(n)).then(n=>{e.invalidateQueries(["emails"]),u.Am.update(i,{render:n.data.message,type:"success",isLoading:!1,autoClose:2e3}),t.push("/admin/subscriber/email")}).catch(e=>{u.Am.update(i,{render:e.response.data.message,type:"error",isLoading:!1,autoClose:2e3})})}},z=[{icon:(0,i.jsx)(H.Z,{}),name:"Hapus",action:U}];return O?(u.Am.error(M.message),setTimeout(()=>t.push("/admin/subscriber/email"),1e3),(0,i.jsx)(i.Fragment,{})):B?(0,i.jsx)(N.Z,{loading:B}):(0,i.jsxs)(j.Z,{children:[(0,i.jsx)(Z.Z,{children:(0,i.jsxs)(m.ZP,{container:!0,children:[(0,i.jsx)(m.ZP,{item:!0,children:(0,i.jsx)(f.Z,{sx:{m:1,bgcolor:"white"},children:(0,i.jsx)(c(),{src:"/images/logo.png",layout:"fill",alt:"PPID"})})}),(0,i.jsxs)(m.ZP,{item:!0,children:[(0,i.jsx)(A.Z,{variant:"h4",children:Q.subjek}),(0,i.jsxs)(g.Z,{children:[(0,i.jsx)(p.Z,{expandIcon:(0,i.jsx)(T.Z,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:(0,i.jsx)(A.Z,{variant:"caption",children:"PPID"})}),(0,i.jsx)(b.Z,{children:(0,i.jsx)(_.Z,{component:P.Z,children:(0,i.jsx)(S.Z,{sx:{},"aria-label":"simple table",children:(0,i.jsxs)(w.Z,{children:[(0,i.jsxs)(k.Z,{children:[(0,i.jsx)(D.Z,{children:"Dari"}),(0,i.jsx)(D.Z,{children:": PPID Bawaslu"})]}),(0,i.jsxs)(k.Z,{children:[(0,i.jsx)(D.Z,{children:"Pengirim"}),(0,i.jsxs)(D.Z,{children:[": ",Q.nama_bawaslu]})]}),(0,i.jsxs)(k.Z,{children:[(0,i.jsx)(D.Z,{children:"Status"}),(0,i.jsxs)(D.Z,{children:[": ",Boolean(Q.status)?"Terkirim":"Draft"]})]}),(0,i.jsxs)(k.Z,{children:[(0,i.jsx)(D.Z,{children:"Tanggal"}),(0,i.jsxs)(D.Z,{children:[":"," ",Q.sended_at?(0,i.jsx)(L.V2,{tanggal:Q.sended_at}):"-"]})]}),(0,i.jsxs)(k.Z,{children:[(0,i.jsx)(D.Z,{children:"Subjek"}),(0,i.jsxs)(D.Z,{children:[": ",Q.subjek]})]}),(0,i.jsxs)(k.Z,{children:[(0,i.jsx)(D.Z,{children:"Penerima"}),"All"===Q.penerima?(0,i.jsx)(D.Z,{children:": Semua Subscriber"}):(0,i.jsxs)(D.Z,{children:[":",(0,i.jsx)(v.Z,{title:l,children:(0,i.jsx)(I.Z,{fontSize:"small"})})]})]})]})})})})]}),(0,i.jsx)("div",{dangerouslySetInnerHTML:{__html:d().sanitize(Q.isi)}})]})]})}),(0,i.jsxs)(y.Z,{p:2,children:[(0,i.jsxs)(A.Z,{variant:"caption",children:["Dibuat :"," ",Q.created_at&&new Date(Q.created_at).toISOString().split("T")[0]]}),(0,i.jsx)(y.Z,{sx:{transform:"translateZ(0px)",flexGrow:1},children:(0,i.jsx)(C.Z,{ariaLabel:"SpeedDial basic example",sx:{position:"absolute",bottom:0,right:0},icon:(0,i.jsx)(E.Z,{}),children:z.map(e=>(0,i.jsx)(F.Z,{icon:e.icon,tooltipTitle:e.name,onClick:e.action},e.name))})})]})]})}Q.auth=!0,Q.breadcrumb=[{path:"/admin",title:"Home"},{path:"/admin/subscriber",title:"Subscriber"},{path:"/admin/subscriber/email",title:"Email"},{path:"/admin/subscriber/email",title:"Detail"}],t.default=Q},43514:function(e,t,n){"use strict";n.d(t,{xX:function(){return h},V2:function(){return x},dl:function(){return m},Kz:function(){return d},aU:function(){return j}});var i=n(85893),r=n(92592),a=n(67294),s=n(25675),l=n.n(s),c=n(6154),u={src:"/_next/static/media/no-file.1bd1d555.png",height:253,width:320,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAYAAAD+Bd/7AAAAqklEQVR42mNQ8Mtlct7wLdt544865w3fk4H0DiC+6Lzx5yUgrcQAJFa7bPq1FEhHuWz8OcF1618rl82/QoBiBS6bfq5kADIWAXEhUIcGUMLFZt5dXsfVHwSBkgxA3M0AlFwDxBOA1sQATSkHsh8C8WugdS5ABc0MQF1FQMZxoOR+F6CkC5ANpK8DTewH0nMZgAIWQMY5IN7nsvn3LCA/GSiZDKSnuWz+HQAAkZJzf8f/2FoAAAAASUVORK5CYII=",blurWidth:8,blurHeight:6},o=n(48764).lW;function d(e){let{text:t}=e,[n,s]=(0,a.useState)("");return(0,a.useEffect)(()=>{if(t)return r.toDataURL(t).then(e=>{s(e)}),()=>{}},[t]),(0,i.jsx)("div",{children:(0,i.jsx)("img",{src:n,alt:"QrCode"})})}function h(){let e=new Date,t=String(e.getDate()).padStart(2,"0"),n=String(e.getMonth()+1).padStart(2,"0"),i=e.getFullYear();return t+"/"+n+"/"+i}function x(e){let{tanggal:t}=e;if(t){var n=new Date(t);return n instanceof Date&&!isNaN(n.valueOf())?n.toISOString().split("T")[0]:"-"}}function m(e){let{number:t}=e;return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function j(e){let{image:t,altText:n="Pemohon"}=e,[r,s]=(0,a.useState)(u);return(0,a.useEffect)(()=>{if(!t)return;let e=!0;return c.Z.get("/api/services/file/public/upload/".concat(t),{responseType:"arraybuffer"}).then(e=>{let t=o.from(e.data,"binary").toString("base64");s("data:".concat(e.headers["content-type"],";base64, ").concat(t))}).catch(e=>{console.log(e.response)}),function(){}},[t]),(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(l(),{src:r,alt:n,priority:!0,width:280,height:0})})}},53724:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var i=n(85893),r=n(88078);function a(e){let{loading:t=!1}=e;return t?(0,i.jsx)(r.Z,{variant:"rectangular",width:"100%",sx:{minHeight:300}}):(0,i.jsx)(i.Fragment,{})}}},function(e){e.O(0,[6886,7848,3304,1868,1235,3839,9774,2888,179],function(){return e(e.s=84480)}),_N_E=e.O()}]);