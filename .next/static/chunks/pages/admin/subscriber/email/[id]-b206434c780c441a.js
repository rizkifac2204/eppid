(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3684],{84480:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/subscriber/email/[id]",function(){return a(62570)}])},62570:function(e,t,a){"use strict";a.r(t);var n=a(85893),r=a(11163),s=a(67294),i=a(6154);a(25675);var c=a(55678),l=a(29238),u=a.n(l),o=a(85945),d=a(67848),h=a(86886),b=a(66242),m=a(44267),x=a(69661),g=a(67358),j=a(38895),p=a(22797),A=a(15861),f=a(7906),Z=a(295),k=a(53252),S=a(72882),v=a(68509),D=a(90629),w=a(34386),_=a(87357),E=a(16323),y=a(15497),F=a(88075),T=a(22961),P=a(23508),M=a(13173),N=a(53724),C=a(43514);function J(){let e=(0,o.NL)(),t=(0,r.useRouter)(),{id:a}=t.query,[l,J]=(0,s.useState)(""),{data:H,isLoading:O,isError:V,error:I}=(0,d.a)({enabled:!!a,queryKey:["email",a],queryFn:e=>{let{signal:t}=e;return i.Z.get("/api/subscriber/email/".concat(a),{signal:t}).then(e=>e.data).catch(e=>{throw Error(e.response.data.message)})}});(0,s.useEffect)(()=>{if(!(null==H?void 0:H.listPenerima))return;let e=H.listPenerima.map(e=>e.email_subscriber),t=e.join(", ");J(t)},[H]);let L=()=>{let n=confirm("Yakin Hapus Data?");if(n){let n=c.Am.loading("Tunggu Sebentar...",{autoClose:!1});i.Z.delete("/api/subscriber/email/".concat(a)).then(a=>{e.invalidateQueries(["emails"]),c.Am.update(n,{render:a.data.message,type:"success",isLoading:!1,autoClose:2e3}),t.push("/admin/subscriber/email")}).catch(e=>{c.Am.update(n,{render:e.response.data.message,type:"error",isLoading:!1,autoClose:2e3})})}},U=[{icon:(0,n.jsx)(M.Z,{}),name:"Hapus",action:L}];return V?(c.Am.error(I.message),setTimeout(()=>t.push("/admin/subscriber/email"),1e3),(0,n.jsx)(n.Fragment,{})):O?(0,n.jsx)(N.Z,{loading:O}):(0,n.jsxs)(b.Z,{children:[(0,n.jsx)(m.Z,{children:(0,n.jsxs)(h.ZP,{container:!0,children:[(0,n.jsx)(h.ZP,{item:!0,children:(0,n.jsx)(x.Z,{sx:{m:1,bgcolor:"white"},src:"/images/logo.png"})}),(0,n.jsxs)(h.ZP,{item:!0,children:[(0,n.jsx)(A.Z,{variant:"h4",children:H.subjek}),(0,n.jsxs)(g.Z,{children:[(0,n.jsx)(j.Z,{expandIcon:(0,n.jsx)(P.Z,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:(0,n.jsx)(A.Z,{variant:"caption",children:"PPID"})}),(0,n.jsx)(p.Z,{children:(0,n.jsx)(S.Z,{component:D.Z,children:(0,n.jsx)(f.Z,{sx:{},"aria-label":"simple table",children:(0,n.jsxs)(Z.Z,{children:[(0,n.jsxs)(v.Z,{children:[(0,n.jsx)(k.Z,{children:"Dari"}),(0,n.jsx)(k.Z,{children:": PPID Bawaslu"})]}),(0,n.jsxs)(v.Z,{children:[(0,n.jsx)(k.Z,{children:"Pengirim"}),(0,n.jsxs)(k.Z,{children:[": ",H.nama_bawaslu]})]}),(0,n.jsxs)(v.Z,{children:[(0,n.jsx)(k.Z,{children:"Status"}),(0,n.jsxs)(k.Z,{children:[": ",Boolean(H.status)?"Terkirim":"Draft"]})]}),(0,n.jsxs)(v.Z,{children:[(0,n.jsx)(k.Z,{children:"Tanggal"}),(0,n.jsxs)(k.Z,{children:[":"," ",H.sended_at?(0,n.jsx)(C.V2,{tanggal:H.sended_at}):"-"]})]}),(0,n.jsxs)(v.Z,{children:[(0,n.jsx)(k.Z,{children:"Subjek"}),(0,n.jsxs)(k.Z,{children:[": ",H.subjek]})]}),(0,n.jsxs)(v.Z,{children:[(0,n.jsx)(k.Z,{children:"Penerima"}),"All"===H.penerima?(0,n.jsx)(k.Z,{children:": Semua Subscriber"}):(0,n.jsxs)(k.Z,{children:[":",(0,n.jsx)(w.Z,{title:l,children:(0,n.jsx)(T.Z,{fontSize:"small"})})]})]})]})})})})]}),(0,n.jsx)("div",{dangerouslySetInnerHTML:{__html:u().sanitize(H.isi)}})]})]})}),(0,n.jsxs)(_.Z,{p:2,children:[(0,n.jsxs)(A.Z,{variant:"caption",children:["Dibuat :"," ",H.created_at&&new Date(H.created_at).toISOString().split("T")[0]]}),(0,n.jsx)(_.Z,{sx:{transform:"translateZ(0px)",flexGrow:1},children:(0,n.jsx)(E.Z,{ariaLabel:"SpeedDial basic example",sx:{position:"absolute",bottom:0,right:0},icon:(0,n.jsx)(y.Z,{}),children:U.map(e=>(0,n.jsx)(F.Z,{icon:e.icon,tooltipTitle:e.name,onClick:e.action},e.name))})})]})]})}J.auth=!0,J.breadcrumb=[{path:"/admin",title:"Home"},{path:"/admin/subscriber",title:"Subscriber"},{path:"/admin/subscriber/email",title:"Email"},{path:"/admin/subscriber/email",title:"Detail"}],t.default=J},43514:function(e,t,a){"use strict";a.d(t,{xX:function(){return h},V2:function(){return b},dl:function(){return m},Kz:function(){return d},aU:function(){return x},mO:function(){return g}});var n=a(85893),r=a(92592),s=a(67294),i=a(25675),c=a.n(i),l=a(6154),u={src:"/_next/static/media/no-file.1bd1d555.png",height:253,width:320,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAMAAADJ2y/JAAAAKlBMVEVDsvlDsflDsvlDsflDsvlEsvpMaXFDsvpDsflDsvlDsvpEs/tEsvpEs/uH5eN4AAAADnRSTlOHnq0Z0G8AkjF1QFjb+3qv5lsAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAxSURBVAiZFcpJEsAgDASx9ngFwv+/S0VngZI2gXJnVTXGjLUvkMV3F5yI0H/czrhvfxUlANXH5xWdAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:6},o=a(48764).lW;function d(e){let{text:t}=e,[a,i]=(0,s.useState)("");return(0,s.useEffect)(()=>{if(t)return r.toDataURL(t).then(e=>{i(e)}),()=>{}},[t]),(0,n.jsx)("div",{children:(0,n.jsx)("img",{src:a,alt:"QrCode"})})}function h(){let e=new Date,t=String(e.getDate()).padStart(2,"0"),a=String(e.getMonth()+1).padStart(2,"0"),n=e.getFullYear();return t+"/"+a+"/"+n}function b(e){let{tanggal:t}=e;if(t){var a=new Date(t);return a instanceof Date&&!isNaN(a.valueOf())?a.toISOString().split("T")[0]:"-"}}function m(e){let{number:t}=e;return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function x(e){let{image:t,altText:a="Pemohon"}=e,[r,i]=(0,s.useState)(u);return(0,s.useEffect)(()=>{if(!t)return;let e=!0;return l.Z.get("/api/services/file/public/upload/".concat(t),{responseType:"arraybuffer"}).then(e=>{let t=o.from(e.data,"binary").toString("base64");i("data:".concat(e.headers["content-type"],";base64, ").concat(t))}).catch(e=>{console.log(e.response)}),function(){}},[t]),(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("a",{href:r.src,target:"_blank",children:(0,n.jsx)(c(),{src:r,alt:a,priority:!0,width:280,height:200})})})}function g(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var a=(e=new Date(1e3*e)).getFullYear(),n=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];switch(e){case 0:e=t?"Jan":"Januari";break;case 1:e=t?"Feb":"Februari";break;case 2:e=t?"Mar":"Maret";break;case 3:e=t?"Apr":"April";break;case 4:e="Mei";break;case 5:e=t?"Jun":"Juni";break;case 6:e=t?"Jul":"Juli";break;case 7:e=t?"Agu":"Agustus";break;case 8:e=t?"Sep":"September";break;case 9:e=t?"Okt":"Oktober";break;case 10:e=t?"Nov":"November";break;case 11:e=t?"Des":"Desember"}return e}(e.getMonth(),!0),r=e.getDate();let s=("0"+e.getHours()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2),i=t?"".concat(function(e){switch(e){case 0:e="Minggu";break;case 1:e="Senin";break;case 2:e="Selasa";break;case 3:e="Rabu";break;case 4:e="Kamis";break;case 5:e="Jumat";break;case 6:e="Sabtu"}return e}(e.getDay()),", "):"";return i+r+" "+n+" "+a+" - "+s}},53724:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});var n=a(85893),r=a(88078);function s(e){let{loading:t=!1}=e;return t?(0,n.jsx)(r.Z,{variant:"rectangular",width:"100%",sx:{minHeight:300}}):(0,n.jsx)(n.Fragment,{})}}},function(e){e.O(0,[6886,7848,3304,1868,1235,3839,9774,2888,179],function(){return e(e.s=84480)}),_N_E=e.O()}]);