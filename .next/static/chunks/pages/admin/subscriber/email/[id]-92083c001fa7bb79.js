(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3684],{84480:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/subscriber/email/[id]",function(){return n(62570)}])},62570:function(e,t,n){"use strict";n.r(t);var i=n(85893),r=n(11163),s=n(67294),a=n(6154);n(25675);var l=n(55678),c=n(29238),u=n.n(c),o=n(85945),d=n(67848),h=n(86886),x=n(66242),m=n(44267),j=n(69661),p=n(67358),g=n(38895),Z=n(22797),A=n(15861),b=n(7906),f=n(295),S=n(53252),v=n(72882),D=n(68509),_=n(90629),w=n(34386),E=n(87357),T=n(16323),k=n(15497),y=n(88075),P=n(22961),C=n(23508),F=n(13173),N=n(53724),H=n(43514);function V(){let e=(0,o.NL)(),t=(0,r.useRouter)(),{id:n}=t.query,[c,V]=(0,s.useState)(""),{data:I,isLoading:L,isError:U,error:B}=(0,d.a)({enabled:!!n,queryKey:["email",n],queryFn:e=>{let{signal:t}=e;return a.Z.get("/api/subscriber/email/".concat(n),{signal:t}).then(e=>e.data).catch(e=>{throw Error(e.response.data.message)})}});(0,s.useEffect)(()=>{if(!(null==I?void 0:I.listPenerima))return;let e=I.listPenerima.map(e=>e.email_subscriber),t=e.join(", ");V(t)},[I]);let M=()=>{let i=confirm("Yakin Hapus Data?");if(i){let i=l.Am.loading("Tunggu Sebentar...",{autoClose:!1});a.Z.delete("/api/subscriber/email/".concat(n)).then(n=>{e.invalidateQueries(["emails"]),l.Am.update(i,{render:n.data.message,type:"success",isLoading:!1,autoClose:2e3}),t.push("/admin/subscriber/email")}).catch(e=>{l.Am.update(i,{render:e.response.data.message,type:"error",isLoading:!1,autoClose:2e3})})}},O=[{icon:(0,i.jsx)(F.Z,{}),name:"Hapus",action:M}];return U?(l.Am.error(B.message),setTimeout(()=>t.push("/admin/subscriber/email"),1e3),(0,i.jsx)(i.Fragment,{})):L?(0,i.jsx)(N.Z,{loading:L}):(0,i.jsxs)(x.Z,{children:[(0,i.jsx)(m.Z,{children:(0,i.jsxs)(h.ZP,{container:!0,children:[(0,i.jsx)(h.ZP,{item:!0,children:(0,i.jsx)(j.Z,{sx:{m:1,bgcolor:"white"},src:"/images/logo.png"})}),(0,i.jsxs)(h.ZP,{item:!0,children:[(0,i.jsx)(A.Z,{variant:"h4",children:I.subjek}),(0,i.jsxs)(p.Z,{children:[(0,i.jsx)(g.Z,{expandIcon:(0,i.jsx)(C.Z,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:(0,i.jsx)(A.Z,{variant:"caption",children:"PPID"})}),(0,i.jsx)(Z.Z,{children:(0,i.jsx)(v.Z,{component:_.Z,children:(0,i.jsx)(b.Z,{sx:{},"aria-label":"simple table",children:(0,i.jsxs)(f.Z,{children:[(0,i.jsxs)(D.Z,{children:[(0,i.jsx)(S.Z,{children:"Dari"}),(0,i.jsx)(S.Z,{children:": PPID Bawaslu"})]}),(0,i.jsxs)(D.Z,{children:[(0,i.jsx)(S.Z,{children:"Pengirim"}),(0,i.jsxs)(S.Z,{children:[": ",I.nama_bawaslu]})]}),(0,i.jsxs)(D.Z,{children:[(0,i.jsx)(S.Z,{children:"Status"}),(0,i.jsxs)(S.Z,{children:[": ",Boolean(I.status)?"Terkirim":"Draft"]})]}),(0,i.jsxs)(D.Z,{children:[(0,i.jsx)(S.Z,{children:"Tanggal"}),(0,i.jsxs)(S.Z,{children:[":"," ",I.sended_at?(0,i.jsx)(H.V2,{tanggal:I.sended_at}):"-"]})]}),(0,i.jsxs)(D.Z,{children:[(0,i.jsx)(S.Z,{children:"Subjek"}),(0,i.jsxs)(S.Z,{children:[": ",I.subjek]})]}),(0,i.jsxs)(D.Z,{children:[(0,i.jsx)(S.Z,{children:"Penerima"}),"All"===I.penerima?(0,i.jsx)(S.Z,{children:": Semua Subscriber"}):(0,i.jsxs)(S.Z,{children:[":",(0,i.jsx)(w.Z,{title:c,children:(0,i.jsx)(P.Z,{fontSize:"small"})})]})]})]})})})})]}),(0,i.jsx)("div",{dangerouslySetInnerHTML:{__html:u().sanitize(I.isi)}})]})]})}),(0,i.jsxs)(E.Z,{p:2,children:[(0,i.jsxs)(A.Z,{variant:"caption",children:["Dibuat :"," ",I.created_at&&new Date(I.created_at).toISOString().split("T")[0]]}),(0,i.jsx)(E.Z,{sx:{transform:"translateZ(0px)",flexGrow:1},children:(0,i.jsx)(T.Z,{ariaLabel:"SpeedDial basic example",sx:{position:"absolute",bottom:0,right:0},icon:(0,i.jsx)(k.Z,{}),children:O.map(e=>(0,i.jsx)(y.Z,{icon:e.icon,tooltipTitle:e.name,onClick:e.action},e.name))})})]})]})}V.auth=!0,V.breadcrumb=[{path:"/admin",title:"Home"},{path:"/admin/subscriber",title:"Subscriber"},{path:"/admin/subscriber/email",title:"Email"},{path:"/admin/subscriber/email",title:"Detail"}],t.default=V},43514:function(e,t,n){"use strict";n.d(t,{xX:function(){return h},V2:function(){return x},dl:function(){return m},Kz:function(){return d},aU:function(){return j}});var i=n(85893),r=n(92592),s=n(67294),a=n(25675),l=n.n(a),c=n(6154),u={src:"/_next/static/media/no-file.1bd1d555.png",height:253,width:320,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAMAAADJ2y/JAAAAKlBMVEVDsvlDsflDsvlDsflDsvlEsvpMaXFDsvpDsflDsvlDsvpEs/tEsvpEs/uH5eN4AAAADnRSTlOHnq0Z0G8AkjF1QFjb+3qv5lsAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAxSURBVAiZFcpJEsAgDASx9ngFwv+/S0VngZI2gXJnVTXGjLUvkMV3F5yI0H/czrhvfxUlANXH5xWdAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:6},o=n(48764).lW;function d(e){let{text:t}=e,[n,a]=(0,s.useState)("");return(0,s.useEffect)(()=>{if(t)return r.toDataURL(t).then(e=>{a(e)}),()=>{}},[t]),(0,i.jsx)("div",{children:(0,i.jsx)("img",{src:n,alt:"QrCode"})})}function h(){let e=new Date,t=String(e.getDate()).padStart(2,"0"),n=String(e.getMonth()+1).padStart(2,"0"),i=e.getFullYear();return t+"/"+n+"/"+i}function x(e){let{tanggal:t}=e;if(t){var n=new Date(t);return n instanceof Date&&!isNaN(n.valueOf())?n.toISOString().split("T")[0]:"-"}}function m(e){let{number:t}=e;return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function j(e){let{image:t,altText:n="Pemohon"}=e,[r,a]=(0,s.useState)(u);return(0,s.useEffect)(()=>{if(!t)return;let e=!0;return c.Z.get("/api/services/file/public/upload/".concat(t),{responseType:"arraybuffer"}).then(e=>{let t=o.from(e.data,"binary").toString("base64");a("data:".concat(e.headers["content-type"],";base64, ").concat(t))}).catch(e=>{console.log(e.response)}),function(){}},[t]),(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("a",{href:r.src,target:"_blank",children:(0,i.jsx)(l(),{src:r,alt:n,priority:!0,width:280,height:200})})})}},53724:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var i=n(85893),r=n(88078);function s(e){let{loading:t=!1}=e;return t?(0,i.jsx)(r.Z,{variant:"rectangular",width:"100%",sx:{minHeight:300}}):(0,i.jsx)(i.Fragment,{})}}},function(e){e.O(0,[6886,7848,3304,1868,1235,3839,9774,2888,179],function(){return e(e.s=84480)}),_N_E=e.O()}]);